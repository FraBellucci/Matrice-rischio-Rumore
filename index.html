<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gioco Valutazione Rischio Rumore</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .card-header {
            padding: 20px;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .bg-blue { background: #dbeafe; }
        .bg-red { background: #fee2e2; }
        .bg-green { background: #dcfce7; }
        
        .card-content {
            padding: 20px;
        }
        
        .info-box {
            background: #f9fafb;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
        }
        
        .info-box.blue {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
        }
        
        .info-box ul {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .info-box li {
            margin-bottom: 5px;
            font-size: 0.95em;
        }
        
        .matrix-box {
            border: 2px solid #d1d5db;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .matrix-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            font-size: 1em;
            background: white;
            cursor: pointer;
        }
        
        .form-group select:disabled {
            background: #f3f4f6;
            cursor: not-allowed;
        }
        
        .result-box {
            padding: 20px;
            border-radius: 8px;
            border: 2px solid;
            font-size: 1.1em;
        }
        
        .result-box.low {
            background: #dcfce7;
            border-color: #22c55e;
        }
        
        .result-box.medium {
            background: #fef3c7;
            border-color: #eab308;
        }
        
        .result-box.high {
            background: #fed7aa;
            border-color: #f97316;
        }
        
        .result-box.very-high {
            background: #fecaca;
            border-color: #ef4444;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px;
            font-size: 1.1em;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        button.primary {
            background: #2563eb;
            color: white;
        }
        
        button.primary:hover:not(:disabled) {
            background: #1d4ed8;
        }
        
        button.primary:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        
        button.secondary {
            background: #6b7280;
            color: white;
        }
        
        button.secondary:hover {
            background: #4b5563;
        }
        
        .alert {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .explanation-box {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }
        
        .explanation-box.success {
            background: #dcfce7;
            border: 1px solid #22c55e;
        }
        
        .check-mark {
            color: #22c55e;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .x-mark {
            color: #ef4444;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .legend {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .legend-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .legend p {
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        strong {
            font-weight: 600;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="card">
            <div class="card-header bg-blue">
                ESEMPIO 1: RISCHIO RUMORE - Officina Meccanica
            </div>
        </div>

        <!-- SITUAZIONE INIZIALE -->
        <div class="card">
            <div class="card-header bg-red">
                üìä SITUAZIONE INIZIALE (prima degli interventi)
            </div>
            <div class="card-content">
                <div class="info-box">
                    <p><strong>Contesto:</strong></p>
                    <ul>
                        <li>Flessibile angolare per taglio lamiere</li>
                        <li>Livello rumore misurato: <strong>92 dB(A)</strong></li>
                        <li>Esposizione: <strong>3 ore/giorno, 5 giorni/settimana</strong></li>
                        <li>LEX,8h calcolato: <strong>89 dB(A)</strong> ‚Üí SOPRA LIMITE 87 dB</li>
                        <li>Nessun intervento tecnico fatto</li>
                        <li>Nessuna rotazione mansioni</li>
                        <li>Solo cuffie fornite (non sempre usate)</li>
                    </ul>
                </div>

                <div class="info-box blue">
                    <p><strong>ü§î Domande guida per PROBABILIT√Ä (P):</strong></p>
                    <ul>
                        <li>Frequenza esposizione? (quotidiana, 3h/giorno)</li>
                        <li>Il danno uditivo √® certo se esposto a lungo sopra 87 dB? (s√¨, scientificamente documentato)</li>
                        <li>√à gi√† successo nel settore? (ipoacusia professionale √® malattia tabellata, frequentissima)</li>
                    </ul>
                    
                    <p style="margin-top: 15px;"><strong>ü§î Domande guida per GRAVIT√Ä (G):</strong></p>
                    <ul>
                        <li>Che danno causa? (ipoacusia permanente irreversibile)</li>
                        <li>Prognosi? (malattia cronica, invalidit√† permanente)</li>
                        <li>Impatto qualit√† vita? (alto: comunicazione compromessa, acufeni)</li>
                    </ul>
                </div>

                <div class="matrix-box">
                    <div class="matrix-title">MATRICE DA COMPILARE - Situazione Iniziale</div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>
                                Probabilit√† (P)
                                <span id="initial-p-check"></span>
                            </label>
                            <select id="initial-p">
                                <option value="">Seleziona...</option>
                                <option value="1">1 - Improbabile</option>
                                <option value="2">2 - Poco Probabile</option>
                                <option value="3">3 - Probabile</option>
                                <option value="4">4 - Molto Probabile</option>
                                <option value="5">5 - Quasi Certo</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>
                                Gravit√† (G)
                                <span id="initial-g-check"></span>
                            </label>
                            <select id="initial-g">
                                <option value="">Seleziona...</option>
                                <option value="1">1 - Lieve</option>
                                <option value="2">2 - Medio</option>
                                <option value="3">3 - Grave</option>
                                <option value="4">4 - Molto Grave</option>
                                <option value="5">5 - Mortale</option>
                            </select>
                        </div>
                    </div>

                    <div id="initial-result" class="hidden"></div>
                </div>
            </div>
        </div>

        <!-- SITUAZIONE DOPO INTERVENTI -->
        <div class="card">
            <div class="card-header bg-green">
                ‚úÖ SITUAZIONE DOPO INTERVENTI
            </div>
            <div class="card-content">
                <div class="info-box">
                    <p><strong>Misure adottate:</strong></p>
                    <ul>
                        <li>Sostituzione flessibile (modello brushless): <strong>-6 dB</strong></li>
                        <li>Dischi diamantati: <strong>-3 dB</strong></li>
                        <li>Manutenzione programmata: <strong>-2 dB</strong></li>
                        <li><strong>Nuovo livello: 83 dB</strong></li>
                        <li>Rotazione 3 operatori √ó 2h invece di 2 √ó 3h</li>
                        <li><strong>Nuovo LEX,8h: 77 dB</strong> ‚Üí sotto 80 dB ‚úì</li>
                        <li>Barriera fonoassorbente per altri lavoratori</li>
                        <li>DPI forniti (uso residuale)</li>
                    </ul>
                </div>

                <div class="matrix-box">
                    <div class="matrix-title">MATRICE DA COMPILARE - Rischio Residuo</div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>
                                Probabilit√† (P)
                                <span id="residual-p-check"></span>
                            </label>
                            <select id="residual-p">
                                <option value="">Seleziona...</option>
                                <option value="1">1 - Improbabile</option>
                                <option value="2">2 - Poco Probabile</option>
                                <option value="3">3 - Probabile</option>
                                <option value="4">4 - Molto Probabile</option>
                                <option value="5">5 - Quasi Certo</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>
                                Gravit√† (G)
                                <span id="residual-g-check"></span>
                            </label>
                            <select id="residual-g">
                                <option value="">Seleziona...</option>
                                <option value="1">1 - Lieve</option>
                                <option value="2">2 - Medio</option>
                                <option value="3">3 - Grave</option>
                                <option value="4">4 - Molto Grave</option>
                                <option value="5">5 - Mortale</option>
                            </select>
                        </div>
                    </div>

                    <div id="residual-result" class="hidden"></div>
                </div>
            </div>
        </div>

        <!-- BUTTONS -->
        <div class="buttons">
            <button class="primary" id="verify-btn">Verifica Risposte</button>
            <button class="secondary" id="reset-btn">Ricomincia</button>
        </div>

        <!-- EXPLANATION -->
        <div id="explanation" class="alert hidden">
            <div style="font-size: 1.1em; font-weight: bold; margin-bottom: 15px;">
                üìù SPIEGAZIONE DELLE RISPOSTE CORRETTE:
            </div>
            
            <div class="explanation-box">
                <p style="font-weight: 600;">Situazione Iniziale: P=5, G=4, R=20</p>
                <p style="margin-top: 8px;"><strong>P=5 (Quasi Certo)</strong>: Esposizione quotidiana oltre limite legale (89 vs 87 dB). Il danno uditivo √® scientificamente certo con questa esposizione prolungata.</p>
                <p style="margin-top: 8px;"><strong>G=4 (Molto Grave)</strong>: Ipoacusia permanente irreversibile, malattia professionale invalidante, grave impatto qualit√† vita.</p>
                <p style="margin-top: 8px;"><strong>R=20 (MOLTO ALTO)</strong>: Richiede intervento immediato obbligatorio.</p>
            </div>

            <div class="explanation-box" style="margin-top: 15px;">
                <p style="font-weight: 600;">Rischio Residuo: P=2, G=2, R=4</p>
                <p style="margin-top: 8px;"><strong>P=2 (Poco Probabile)</strong>: Livello 77 dB ben sotto limiti. Riduzione tecnica + organizzativa efficaci. Danno possibile solo in caso di esposizioni anomale non previste.</p>
                <p style="margin-top: 8px;"><strong>G=2 (Medio)</strong>: Gravit√† intrinseca del danno resta (ipoacusia), ma ora molto improbabile. Con DPI residuali disponibili, danno limitato.</p>
                <p style="margin-top: 8px;"><strong>R=4 (BASSO)</strong>: Rischio accettabile con monitoraggio periodico.</p>
            </div>

            <div class="explanation-box success" style="margin-top: 15px;">
                <p style="font-weight: 600;">‚úÖ Riduzione del rischio: da R=20 (Molto Alto) a R=4 (Basso) = -80%</p>
                <p style="margin-top: 8px;">Seguita correttamente la gerarchia: riduzione fonte + organizzazione + DPI residuali.</p>
            </div>
        </div>

        <!-- LEGEND -->
        <div class="legend">
            <div class="legend-title">üìã LEGENDA MATRICE 5√ó5</div>
            <p><strong>1-4:</strong> BASSO (accettabile, monitoraggio)</p>
            <p><strong>5-9:</strong> MEDIO (misure migliorative)</p>
            <p><strong>10-15:</strong> ALTO (intervento necessario)</p>
            <p><strong>16-25:</strong> MOLTO ALTO (intervento immediato)</p>
        </div>
    </div>

    <script>
        var correctAnswers = {
            initial: { P: 5, G: 4 },
            residual: { P: 2, G: 2 }
        };

        function calculateRisk(p, g) {
            var risk = p * g;
            if (risk <= 4) return { level: 'BASSO', cssClass: 'low' };
            if (risk <= 9) return { level: 'MEDIO', cssClass: 'medium' };
            if (risk <= 15) return { level: 'ALTO', cssClass: 'high' };
            return { level: 'MOLTO ALTO', cssClass: 'very-high' };
        }

        function updateResult(type) {
            var pSelect = document.getElementById(type + '-p');
            var gSelect = document.getElementById(type + '-g');
            var resultDiv = document.getElementById(type + '-result');

            var p = parseInt(pSelect.value);
            var g = parseInt(gSelect.value);

            if (p && g) {
                var riskData = calculateRisk(p, g);
                var r = p * g;
                
                resultDiv.className = 'result-box ' + riskData.cssClass;
                resultDiv.innerHTML = '<p style="font-weight: bold; font-size: 1.1em;">RISCHIO (R = P √ó G) = ' + r + '</p>' +
                    '<p style="font-weight: bold; font-size: 1.3em; margin-top: 10px;">Livello: ' + riskData.level + '</p>';
                resultDiv.classList.remove('hidden');
            } else {
                resultDiv.classList.add('hidden');
            }
        }

        document.getElementById('initial-p').addEventListener('change', function() { updateResult('initial'); });
        document.getElementById('initial-g').addEventListener('change', function() { updateResult('initial'); });
        document.getElementById('residual-p').addEventListener('change', function() { updateResult('residual'); });
        document.getElementById('residual-g').addEventListener('change', function() { updateResult('residual'); });

        document.getElementById('verify-btn').addEventListener('click', function() {
            var initialP = parseInt(document.getElementById('initial-p').value);
            var initialG = parseInt(document.getElementById('initial-g').value);
            var residualP = parseInt(document.getElementById('residual-p').value);
            var residualG = parseInt(document.getElementById('residual-g').value);

            if (!initialP || !initialG || !residualP || !residualG) {
                alert('Compila tutte le risposte prima di verificare!');
                return;
            }

            document.getElementById('initial-p-check').innerHTML = 
                initialP === correctAnswers.initial.P ? '<span class="check-mark">‚úì</span>' : '<span class="x-mark">‚úó</span>';
            document.getElementById('initial-g-check').innerHTML = 
                initialG === correctAnswers.initial.G ? '<span class="check-mark">‚úì</span>' : '<span class="x-mark">‚úó</span>';
            document.getElementById('residual-p-check').innerHTML = 
                residualP === correctAnswers.residual.P ? '<span class="check-mark">‚úì</span>' : '<span class="x-mark">‚úó</span>';
            document.getElementById('residual-g-check').innerHTML = 
                residualG === correctAnswers.residual.G ? '<span class="check-mark">‚úì</span>' : '<span class="x-mark">‚úó</span>';

            document.getElementById('initial-p').disabled = true;
            document.getElementById('initial-g').disabled = true;
            document.getElementById('residual-p').disabled = true;
            document.getElementById('residual-g').disabled = true;

            document.getElementById('explanation').classList.remove('hidden');

            this.disabled = true;
        });

        document.getElementById('reset-btn').addEventListener('click', function() {
            document.getElementById('initial-p').value = '';
            document.getElementById('initial-g').value = '';
            document.getElementById('residual-p').value = '';
            document.getElementById('residual-g').value = '';

            document.getElementById('initial-p').disabled = false;
            document.getElementById('initial-g').disabled = false;
            document.getElementById('residual-p').disabled = false;
            document.getElementById('residual-g').disabled = false;

            document.getElementById('initial-p-check').innerHTML = '';
            document.getElementById('initial-g-check').innerHTML = '';
            document.getElementById('residual-p-check').innerHTML = '';
            document.getElementById('residual-g-check').innerHTML = '';

            document.getElementById('initial-result').classList.add('hidden');
            document.getElementById('residual-result').classList.add('hidden');
            document.getElementById('explanation').classList.add('hidden');

            document.getElementById('verify-btn').disabled = false;
        });
    </script>
</body>
</html>
